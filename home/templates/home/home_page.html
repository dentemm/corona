{% extends 'base.html' %}
{% load static %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}
{% endblock extra_css %}

{% block content %}
  <div class="content">
    <div class="container">
      <div class="col-xl-7 col-lg-8 col-md-10">
        <div class="row">
          <div class="offset-lg-2 col-lg-8 col-xs-11 text-center pt-3">
            <h5>{{ page.info }}</h5>
          </div>
          <div class="col-lg-12 col-xs-10 mb-1 text-center">
            <h1>
              {{ page.title }}
            </h1>
          </div>
          <div class="offset-lg-1 col-lg-10 col-xs-11 text-center pl-0 pr-0">
            <h3 style="letter-spacing: 3px">
              [ {{ page.subtitle }} ]
            </h3>
          </div>
          <div class="clock offset-lg-1 col-lg-10 mb-5 pl-0 pr-0">
            <div class="dayscontainer">
              <div class="days"></div>
              <div class="date-label">DAYS</div>
            </div>
            <div class="hourscontainer">
              <div class="hours"></div>
              <div class="date-label">HOURS</div>
            </div>
            <div class="minutescontainer">
              <div class="minutes"></div>
              <div class="date-label">MIN</div>
            </div>
            <div class="secondscontainer">
              <div class="seconds"></div>
              <div class="date-label">SEC</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- mailchimp news letter  -->
      <div class="row">
        <div class="col-lg-8 col-sm-12">
          <p class="pt-3 ml-3">{{ page.discover }}:<p>
          <form action="https://health-house.us13.list-manage.com/subscribe/post" method="POST">
            <input type="hidden" name="u" value="d5419bf6a7b18de40b57ab673">
            <input type="hidden" name="id" value="9bb5a9f1da">
            <div class="input-group mb-3 align-self-center col-9">
              <input 
                type="email"
                autocapitalize="off"
                autocorrect="off"
                name="MERGE0"
                id="MERGE0"
                id="email"
                value=""
                placeholder="Email"
                aria-describedby="basic-addon2"
                class="form-control text-secondary"
              >
              <div class="col-sm-6 mb-5">
                <button type="submit" class="btn btn-white text-black bg-white">Notify me</button>
              </div>
            </div>
          </form>
        </div>
        <div class="col-lg-4 col-sm-12 pt-3">
          <div class="row">
            <div class="col-lg-4 col-sm-4">
              <a href="https://www.health-house.be" target="_blank">
                <img class="img-fluid" src="{% static 'assets/hh_logo_white.png' %}">
              </a>
            </div>
            <div class="offset-lg-0 col-lg-8 offset-sm-1 col-sm-7">
              <a href="https://www.norvelljefferson.com" target="_blank">
                <img class="img-fluid" src="{% static 'assets/nj_logo_white.png' %}">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}

{% block extra_js %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js" integrity="sha512-rmZcZsyhe0/MAjquhTgiUcb4d9knaFc7b5xAfju483gbEXTkeJRUMIPk6s3ySZMYUHEcjKbjLjyddGWMrNEvZg==" crossorigin="anonymous"></script>
  <script type="text/javascript">

      let year = {{ page.date|date:'Y' }}
      let month = {{ page.date|date:'n' }} - 1
      let day = {{ page.date|date:'j' }}
      let hour = {{ page.date|date:'H' }}
      let minute = {{ page.date|date:'i' }}
      let second = {{ page.date|date:'s' }}
  
      let date = new Date(year, month, day, hour, minute, second)

      let convertToCountDownArray = (dateDiffInMs) => {
      
      let minutesInMs = 60 * 1000
      let hoursInMs = minutesInMs * 60
      let daysInMs = hoursInMs * 24
      
      let days = Math.floor(dateDiffInMs / (daysInMs))
      let hours = Math.floor((dateDiffInMs % daysInMs) / hoursInMs)
      let minutes = Math.floor((dateDiffInMs % hoursInMs) / minutesInMs)
      let seconds = Math.floor((dateDiffInMs % minutesInMs) / 1000)
      
      let hoursString = `${hours}`.length == 1 ? `0${hours}` : hours
      let minutesString = `${minutes}`.length == 1 ? `0${minutes}` : minutes
      let secondsString = `${seconds}`.length == 1 ? `0${seconds}` : seconds
      
      let result = [days, hoursString, minutesString, secondsString]
      
      return result
    }

    let updateClock = () => {
      let diff = moment(date).diff(moment())
      let result = convertToCountDownArray(diff)
      
      $("div.clock .days").html(result[0])
      $("div.clock .hours").html(result[1])
      $("div.clock .minutes").html(result[2])
      $("div.clock .seconds").html(result[3])
    }

    $(() => {
      updateClock()
      
      setInterval(() => {
        updateClock()	
      }, 1000)
    });
  </script>
{% endblock extra_js %}
